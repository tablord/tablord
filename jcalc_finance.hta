<HTML xmlns="http://www.w3.org/1999/xhtml" xmlns:svg = "http://www.w3.org/2000/svg" XMLNS:HTA><HEAD><HTA:APPLICATION APPLICATIONNAME="JCalc: Finance Documentation" SCROLL="yes" SINGLEINSTANCE="yes"></HTA:APPLICATION><LINK rel=stylesheet type=text/css href="jcalc.css" src="jcalc.css">
<SCRIPT src="jquery-1.5.1.min.js"></SCRIPT>

<SCRIPT src="jcalcEdi.js"></SCRIPT>

<SCRIPT src="jcalc.js"></SCRIPT>

<SCRIPT src="axe.js"></SCRIPT>

<SCRIPT src="stateMachine.js"></SCRIPT>

<SCRIPT src="BOM.js"></SCRIPT>

<SCRIPT src="sys.js"></SCRIPT>

<SCRIPT src="ocrRdy.js"></SCRIPT>

<SCRIPT src="finance.js"></SCRIPT>
</HEAD>
<BODY designMode="on">
<DIV id=sect0012 class=SECTION>
<H1 onclick=jc.selectElement(this.parentNode); class=SECTIONTITLE contentEditable=false>1 Finance module</H1>
<DIV class=SECTIONCONTAINER>
<DIV onclick=jc.selectElement(this); id=rich0013 class=RICHTEXT contentEditable=false jQuery151047589795705268423="10" jQuery15108764633521380936="9" jQuery1510378875261315682="9" jQuery15109979635317510751="4" jQuery15105608160678483406="4" jQuery15108542791116371112="3" jQuery15106665571144262056="4" jQuery151044326599603771793="8" jQuery15101737747918576364="9" jQuery15105478714736071766="9" jQuery15107420532693318493="10">the purpose of the finance.js module is to help in business plan and the simulation of financial situations</DIV>
<DIV id=sect0014 class=SECTION>
<H2 onclick=jc.selectElement(this.parentNode); class=SECTIONTITLE contentEditable=false>1.1 CashFlow</H2>
<DIV class=SECTIONCONTAINER>
<DIV onclick=jc.selectElement(this); id=rich0015 class=RICHTEXT contentEditable=false jQuery151047589795705268423="11" jQuery15108764633521380936="10" jQuery1510378875261315682="10" jQuery15109979635317510751="5" jQuery15105608160678483406="5" jQuery15108542791116371112="4" jQuery15106665571144262056="5" jQuery151044326599603771793="9" jQuery15101737747918576364="10" jQuery15105478714736071766="10" jQuery15107420532693318493="11">
<P>the CashFlow class is the basic bloc of this module</P>
<P>in order to instanciate a new CashFlow object just use the </P>
<P><SPAN id=code0018 class="CODE AUTOEXEC" style="DISPLAY: none" jQuery151047589795705268423="1" jQuery15108764633521380936="1" jQuery1510378875261315682="1" jQuery15109979635317510751="1" jQuery15106665571144262056="1" jQuery151044326599603771793="1" jQuery15101737747918576364="1" jQuery15105478714736071766="1" jQuery15107420532693318493="1">jc.help(jc.cashFlow)</SPAN><SPAN id=out0018 class="OUTPUT SUCCESS" contentEditable=false><B>function cashFlow(name,startDate,endDate,currency)</B><BR></SPAN></P>
<P>&nbsp;</P>
<P>&nbsp;</P></DIV><PRE onclick=jc.selectElement(this); id=code0021 class=CODE contentEditable=false jQuery151047589795705268423="2" jQuery15108764633521380936="2" jQuery1510378875261315682="2" jQuery15109979635317510751="7" jQuery151044326599603771793="2" jQuery15101737747918576364="2" jQuery15105478714736071766="2" jQuery15107420532693318493="2"><P>jc.cashFlow('myBusiness','2019/1/1','2029/1/1','CHF')</P></PRE>
<DIV onclick=jc.outClick(this) id=out0021 class="OUTPUT OLD SUCCESS"><VAR>myBusiness</VAR>
<TABLE border=1>
<THEAD>
<TR></TR></THEAD>
<TBODY></TBODY></TABLE></DIV>
<DIV onclick=jc.selectElement(this); id=rich0022 class=RICHTEXT contentEditable=false jQuery151047589795705268423="12" jQuery15108764633521380936="11" jQuery1510378875261315682="11" jQuery15109979635317510751="8" jQuery151044326599603771793="10" jQuery15101737747918576364="11" jQuery15105478714736071766="11" jQuery15107420532693318493="12">
<P>so far so good, but not much inside. like with table or variable, this CashFlow has a name and it has been added to v so it is accessible like a global variable</P>
<P>&nbsp;</P>
<P>let assume that the first thing is to inject some cash from your own savings</P></DIV><PRE onclick=jc.selectElement(this); id=code0023 class=CODE contentEditable=false jQuery151047589795705268423="3" jQuery15108764633521380936="3" jQuery1510378875261315682="3" jQuery15109979635317510751="9" jQuery151044326599603771793="3" jQuery15101737747918576364="3" jQuery15105478714736071766="3" jQuery15107420532693318493="3">myBusiness.recieve('initial cash from my own savings',100000,'2019/2/1')</PRE>
<DIV onclick=jc.outClick(this) id=out0023 class="OUTPUT OLD SUCCESS"><VAR>myBusiness</VAR>
<TABLE border=1>
<THEAD>
<TR>
<TH>date</TH>
<TH>amount</TH>
<TH>subject</TH>
<TH>balance</TH></TR></THEAD>
<TBODY>
<TR>
<TD>Fri Feb 1 00:00:00 UTC+0100 2019</TD>
<TD>100000</TD>
<TD>initial cash from my own savings</TD>
<TD>100000</TD></TR></TBODY></TABLE></DIV>
<DIV onclick=jc.selectElement(this); id=rich0024 class=RICHTEXT contentEditable=false jQuery151047589795705268423="13" jQuery15108764633521380936="12" jQuery1510378875261315682="12" jQuery15109979635317510751="10" jQuery151044326599603771793="11" jQuery15101737747918576364="12" jQuery15105478714736071766="12" jQuery15107420532693318493="13">Wow now some cash is inside the company, but as usual, things start and you have to pay the first bills</DIV><PRE onclick=jc.selectElement(this); id=code0025 class=CODE contentEditable=false jQuery151047589795705268423="4" jQuery15108764633521380936="4" jQuery1510378875261315682="4" jQuery15109979635317510751="11" jQuery151044326599603771793="4" jQuery15101737747918576364="4" jQuery15105478714736071766="4" jQuery15107420532693318493="4"><P>myBusiness</P><P>.pay('registration fees',20000,'2019/3/1')</P><P>.pay('lawers status redaction',4000,'2019/3/15')</P></PRE>
<DIV onclick=jc.outClick(this) id=out0025 class="OUTPUT OLD SUCCESS"><VAR>myBusiness</VAR>
<TABLE border=1>
<THEAD>
<TR>
<TH>date</TH>
<TH>amount</TH>
<TH>subject</TH>
<TH>balance</TH></TR></THEAD>
<TBODY>
<TR>
<TD>Fri Feb 1 00:00:00 UTC+0100 2019</TD>
<TD>100000</TD>
<TD>initial cash from my own savings</TD>
<TD>100000</TD></TR>
<TR>
<TD>Fri Mar 1 00:00:00 UTC+0100 2019</TD>
<TD>-20000</TD>
<TD>registration fees</TD>
<TD>80000</TD></TR>
<TR>
<TD>Fri Mar 15 00:00:00 UTC+0100 2019</TD>
<TD>-4000</TD>
<TD>lawers status redaction</TD>
<TD>76000</TD></TR></TBODY></TABLE></DIV>
<DIV onclick=jc.selectElement(this); id=rich0026 class=RICHTEXT contentEditable=false jQuery151047589795705268423="14" jQuery15108764633521380936="13" jQuery1510378875261315682="13" jQuery15109979635317510751="12" jQuery151044326599603771793="12" jQuery15101737747918576364="13" jQuery15105478714736071766="13" jQuery15107420532693318493="14">
<P>As you see the methods receive or pay allow method chaining so you can simple call .pay in a serial manner. As usual in <SPAN id=code0027 class="CODE AUTOEXEC" style="DISPLAY: none" jQuery151047589795705268423="5" jQuery15108764633521380936="5" jQuery1510378875261315682="5" jQuery151044326599603771793="5" jQuery15101737747918576364="5" jQuery15105478714736071766="5" jQuery15107420532693318493="5">jc.name</SPAN><SPAN id=out0027 class="OUTPUT SUCCESS" contentEditable=false>JCalc</SPAN> if the result of a code block is an object, its .span() method will be called and so we can visualize the result.</P>
<P>Now we just pay some bills without taking care to the structure or nature of the things. But now we will have some fixed cost since we just sign a rent contract for an office for 1 year. So let start to be a bit more structured, even if this is now mandatory</P></DIV><PRE onclick=jc.selectElement(this); id=code0028 class=CODE contentEditable=false jQuery151047589795705268423="6" jQuery15108764633521380936="6" jQuery1510378875261315682="6" jQuery15109979635317510751="13" jQuery151044326599603771793="6" jQuery15101737747918576364="6" jQuery15105478714736071766="6" jQuery15107420532693318493="6"><P>myBusiness.account('fixedCost')</P><P>  .pay('initial down payment',2000,'2019/3/30')</P></PRE>
<DIV onclick=jc.outClick(this) id=out0028 class="OUTPUT OLD SUCCESS"><VAR>fixedCost</VAR>
<TABLE border=1>
<THEAD>
<TR>
<TH>date</TH>
<TH>amount</TH>
<TH>subject</TH>
<TH>balance</TH></TR></THEAD>
<TBODY>
<TR>
<TD>Sat Mar 30 00:00:00 UTC+0100 2019</TD>
<TD>-2000</TD>
<TD>initial down payment</TD>
<TD>-2000</TD></TR></TBODY></TABLE></DIV>
<DIV onclick=jc.selectElement(this); id=rich0029 class=RICHTEXT contentEditable=false jQuery151047589795705268423="15" jQuery15108764633521380936="14" jQuery1510378875261315682="14" jQuery15109979635317510751="14" jQuery151044326599603771793="13" jQuery15101737747918576364="14" jQuery15105478714736071766="14" jQuery15107420532693318493="15">The beauty is that it is a sub cashFlow, that is still accessible from the main business plan and is fully part of the main one:</DIV><PRE onclick=jc.selectElement(this); id=code0030 class=CODE contentEditable=false jQuery151047589795705268423="7" jQuery15108764633521380936="7" jQuery1510378875261315682="7" jQuery15109979635317510751="15" jQuery151044326599603771793="7" jQuery15101737747918576364="7" jQuery15105478714736071766="7" jQuery15107420532693318493="7"><P>myBusiness</P></PRE>
<DIV onclick=jc.outClick(this) id=out0030 class="OUTPUT OLD SUCCESS"><VAR>myBusiness</VAR>
<TABLE border=1>
<THEAD>
<TR>
<TH>date</TH>
<TH>amount</TH>
<TH>subject</TH>
<TH>balance</TH></TR></THEAD>
<TBODY>
<TR>
<TD>Fri Feb 1 00:00:00 UTC+0100 2019</TD>
<TD>100000</TD>
<TD>initial cash from my own savings</TD>
<TD>100000</TD></TR>
<TR>
<TD>Fri Mar 1 00:00:00 UTC+0100 2019</TD>
<TD>-20000</TD>
<TD>registration fees</TD>
<TD>80000</TD></TR>
<TR>
<TD>Fri Mar 15 00:00:00 UTC+0100 2019</TD>
<TD>-4000</TD>
<TD>lawers status redaction</TD>
<TD>76000</TD></TR>
<TR>
<TD>Sat Mar 30 00:00:00 UTC+0100 2019</TD>
<TD>-2000</TD>
<TD>initial down payment</TD>
<TD>74000</TD></TR></TBODY></TABLE></DIV>
<DIV onclick=jc.selectElement(this); id=rich0031 class=RICHTEXT contentEditable=false jQuery151047589795705268423="16" jQuery15108764633521380936="15" jQuery1510378875261315682="15" jQuery15109979635317510751="16" jQuery151044326599603771793="14" jQuery15101737747918576364="15" jQuery15105478714736071766="15" jQuery15107420532693318493="16">
<P>You can see that the initial down payment is also present at the upper level. So you can structure your cash flow in several accounts that are now accessible through the main cashFlow either through the . or [] notation .</P>
<P>We can now add the monthly bill for the rental of the office</P></DIV>
<DIV id=localToolBar class=HIDDEN><BUTTON onclick=jc.insertNewSection(jc.localToolBar);>^ new section ^</BUTTON><BUTTON onclick=jc.insertNewRichText(jc.localToolBar);>^ new richtext ^</BUTTON><BUTTON onclick=jc.insertNewCodeBlock(jc.localToolBar);>^ new code ^</BUTTON><SPAN id=codeId>code0032</SPAN><INPUT onclick="$('.CODE').toggleClass('HIDDEN',this.checked);this.scrollIntoView();" type=checkbox>hide codes</INPUT><INPUT onclick="$('.DELETED').toggleClass('HIDDEN',this.checked);this.scrollIntoView();" type=checkbox>hide deleted</INPUT><INPUT onclick="$('.TEST').toggleClass('HIDDEN',this.checked);" type=checkbox>hide tests</INPUT><INPUT onclick="$('.TRACE').toggleClass('HIDDEN',this.checked);" type=checkbox>hide traces</INPUT><BUTTON onclick=jc.hideToolBars();>hide ToolBars</BUTTON>
<DIV class=RICHEDITTOOLBAR style="FLOAT: left"><BUTTON onclick=jc.richedit.bold();><B>B</B></BUTTON><BUTTON onclick=jc.richedit.italic();><I>i</I></BUTTON><BUTTON onclick=jc.richedit.underline();><U>U</U></BUTTON><BUTTON onclick=jc.richedit.strike();><STRIKE>S</STRIKE></BUTTON><BUTTON onclick=jc.richedit.h1();><B>H1</B></BUTTON><BUTTON onclick=jc.richedit.h2();><B>H2</B></BUTTON><BUTTON onclick=jc.richedit.div();>div</BUTTON><BUTTON onclick=jc.richedit.p();>¶</BUTTON><BUTTON onclick=jc.richedit.ol();>#</BUTTON><BUTTON onclick=jc.richedit.ul();>•</BUTTON><BUTTON onclick=jc.richedit.pre();>{}</BUTTON></DIV>
<DIV><BUTTON onclick=jc.execAutoExec();>run</BUTTON><BUTTON onclick=jc.execAll();>run all</BUTTON><BUTTON onclick=jc.showOutputHtml(this);>show html</BUTTON><BUTTON onclick=jc.copyOutputToTest(this);>--&gt;test</BUTTON><BUTTON onclick=jc.toggleAutoExec();>autoexec</BUTTON><BUTTON onclick=jc.save();>save</BUTTON><BUTTON onclick=jc.deleteBlock(jc.selectedElement);>V delete V</BUTTON></DIV></DIV><PRE onclick=jc.selectElement(this); id=code0032 class=CODE contentEditable=false jQuery151047589795705268423="8" jQuery15108764633521380936="8" jQuery1510378875261315682="8" jQuery151044326599603771793="15" jQuery15101737747918576364="8" jQuery15105478714736071766="8" jQuery15107420532693318493="8"><P>myBusiness.fixedCost</P><P><FONT style="BACKGROUND-COLOR: #f2f9a8">  .monthly('2019/3/30','2020/3/30')</FONT></P><P><FONT style="BACKGROUND-COLOR: #f2f9a8">    .pay('office rental',1000)</FONT></P><P><FONT style="BACKGROUND-COLOR: #f2f9a8"></FONT>&nbsp; .end()</P></PRE>
<DIV onclick=jc.outClick(this) id=out0032 class="OUTPUT OLD SUCCESS"><VAR>fixedCost</VAR>
<TABLE border=1>
<THEAD>
<TR>
<TH>date</TH>
<TH>amount</TH>
<TH>subject</TH>
<TH>balance</TH></TR></THEAD>
<TBODY>
<TR>
<TD>Sat Mar 30 00:00:00 UTC+0100 2019</TD>
<TD>-2000</TD>
<TD>initial down payment</TD>
<TD>-2000</TD></TR></TBODY></TABLE></DIV><PRE onclick=jc.selectElement(this); id=code0034 class=CODE contentEditable=false jQuery151047589795705268423="9" jQuery15105478714736071766="16" jQuery15107420532693318493="9">jc.inspect(myBusiness.fixedCost)</PRE>
<DIV onclick=jc.outClick(this) id=out0034 class="OUTPUT OLD SUCCESS">
<DIV class=INSPECT>
<FIELDSET><LEGEND>[object Object] </LEGEND>
<TABLE class=INSPECT>
<TBODY>
<TR>
<TH vAlign=top>_name</TH>
<TD style="TEXT-ALIGN: left" vAlign=top>fixedCost</TD></TR>
<TR>
<TH vAlign=top>_startDate</TH>
<TD style="TEXT-ALIGN: left" vAlign=top>Tue&nbsp;Jan&nbsp;1&nbsp;00:00:00&nbsp;UTC+0100&nbsp;2019</TD></TR>
<TR>
<TH vAlign=top>_endDate</TH>
<TD style="TEXT-ALIGN: left" vAlign=top>Mon&nbsp;Jan&nbsp;1&nbsp;00:00:00&nbsp;UTC+0100&nbsp;2029</TD></TR>
<TR>
<TH vAlign=top>_currency</TH>
<TD style="TEXT-ALIGN: left" vAlign=top>undefined</TD></TR>
<TR>
<TH vAlign=top>_parent</TH>
<TD style="TEXT-ALIGN: left" vAlign=top>[object&nbsp;Object]</TD></TR>
<TR>
<TH vAlign=top>_type</TH>
<TD style="TEXT-ALIGN: left" vAlign=top>account</TD></TR>
<TR>
<TH vAlign=top>_orders</TH>
<TD style="TEXT-ALIGN: left" vAlign=top>recieve/pay,[]&nbsp;monthly<BR>0:&nbsp;&nbsp;pay<BR></TD></TR>
<TR>
<TH vAlign=top>_payments</TH>
<TD style="TEXT-ALIGN: left" vAlign=top>[object&nbsp;Object]</TD></TR>
<TR>
<TH vAlign=top>ended</TH>
<TD style="TEXT-ALIGN: left" vAlign=top>true</TD></TR>
<TR>
<TH vAlign=top>account</TH>
<TD style="TEXT-ALIGN: left" vAlign=top><B>function(name,startDate,endDate,currency)</B><BR></TD></TR>
<TR>
<TH vAlign=top>debt</TH>
<TD style="TEXT-ALIGN: left" vAlign=top><B>function(name,startDate,endDate,currency)</B><BR></TD></TR>
<TR>
<TH vAlign=top>recieve</TH>
<TD style="TEXT-ALIGN: left" vAlign=top><B>function(subject,amount,date,currency)</B><BR>&nbsp;add&nbsp;an&nbsp;order&nbsp;of&nbsp;receiving&nbsp;amount&nbsp;at&nbsp;date.&nbsp;</TD></TR>
<TR>
<TH vAlign=top>pay</TH>
<TD style="TEXT-ALIGN: left" vAlign=top><B>function(subject,amount,date,currency)</B><BR></TD></TR>
<TR>
<TH vAlign=top>monthly</TH>
<TD style="TEXT-ALIGN: left" vAlign=top><B>function(startDate,endDate)</B><BR></TD></TR>
<TR>
<TH vAlign=top>updateBalance</TH>
<TD style="TEXT-ALIGN: left" vAlign=top><B>function()</B><BR>&nbsp;update&nbsp;the&nbsp;balance&nbsp;field&nbsp;of&nbsp;each&nbsp;records<BR>&nbsp;as&nbsp;records&nbsp;are&nbsp;shared&nbsp;between&nbsp;the&nbsp;different&nbsp;levels&nbsp;of&nbsp;cashFlow&nbsp;<BR>&nbsp;this&nbsp;function&nbsp;has&nbsp;to&nbsp;be&nbsp;called&nbsp;before&nbsp;reading&nbsp;any&nbsp;balance&nbsp;field</TD></TR>
<TR>
<TH vAlign=top>end</TH>
<TD style="TEXT-ALIGN: left" vAlign=top><B>function()</B><BR>&nbsp;updates&nbsp;the&nbsp;payments&nbsp;according&nbsp;to&nbsp;all&nbsp;previous&nbsp;orders<BR>&nbsp;returns&nbsp;the&nbsp;PARENT&nbsp;cashFlow&nbsp;in&nbsp;order&nbsp;to&nbsp;continue&nbsp;method&nbsp;chainning</TD></TR>
<TR>
<TH vAlign=top>span</TH>
<TD style="TEXT-ALIGN: left" vAlign=top><B>function(options)</B><BR></TD></TR></TBODY></TABLE></FIELDSET></DIV></DIV>
<DIV class="BOTTOMTOOLBAR HIDDEN"><BUTTON onclick=jc.insertNewSection(this.parentNode);>^ new section ^</BUTTON><BUTTON onclick=jc.insertNewRichText(this.parentNode);>^ new rich text ^</BUTTON><BUTTON onclick=jc.insertNewCodeBlock(this.parentNode);>^ new code ^</BUTTON></DIV></DIV></DIV>
<DIV class="BOTTOMTOOLBAR HIDDEN"><BUTTON onclick=jc.insertNewSection(this.parentNode);>^ new section ^</BUTTON><BUTTON onclick=jc.insertNewRichText(this.parentNode);>^ new rich text ^</BUTTON><BUTTON onclick=jc.insertNewCodeBlock(this.parentNode);>^ new code ^</BUTTON></DIV></DIV></DIV>
<DIV class="BOTTOMTOOLBAR HIDDEN"><BUTTON onclick=jc.insertNewSection(this.parentNode);>^ new section ^</BUTTON><BUTTON onclick=jc.insertNewRichText(this.parentNode);>^ new rich text ^</BUTTON><BUTTON onclick=jc.insertNewCodeBlock(this.parentNode);>^ new code ^</BUTTON></DIV></BODY></HTML>